<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Testing donate now!</title>
</head>

<link rel="stylesheet" href="css/tangerine.css.min.css" />

<script type='text/javascript'
	src='/donatenow/dwr/interface/donateNow.js'></script>
<script type='text/javascript' src='/donatenow/dwr/engine.js'></script>
<script type='text/javascript' src='/donatenow/dwr/util.js'></script>
<script type='text/javascript' src='js/jquery/jquery-1.3.2.js'></script>
<body class="ext-gecko ext-gecko3 ext-mac">

<script type='text/javascript'>
var $j = jQuery.noConflict();
		
 function handleReturn(paymentStatus) {
 	if (paymentStatus.processed == false) {
 		handleError("Payment processing failed! Please confirm payment information");
 		showError();
 	} else {
 		handleApproval(paymentStatus.authorizationCode);
 	}
 }

function handleApproval(authCode) {
	$j("div#approval").show();
	$j("<li>Thank your for your donation!</li>").appendTo("ul#approved");
	$j("<li>Your authorization code for this transaction is " + authCode + " </li>").appendTo("ul#approved");
}

function showError() {
	$j("div#globalErrors").show();
}

function hideError() {
	$j("div#globalErrors").hide();
}

function clearError() {
	$j("ul#errors").empty();
}

function handleError(str) {
	$j("<li>" + str + "</li>").appendTo('ul#errors');
}
 		
function validateForm() {
	var isValid = 1;
	if($j("#firstName").attr("value").length <= 0) {
		handleError("First Name is required!");
		isValid = 0;
	}

	if($j("#lastName").attr("value").length <= 0) {
		handleError("Last Name is required!");
		isValid = 0;
	}

	if($j("#email").attr("value").length <= 0) {
		handleError("Email Address is required!");
		isValid = 0;
	}

	if($j("#phone").attr("value").length <= 0) {
		handleError("Billing phone number is required!");
		isValid = 0;
	}

	if($j("#amount").attr("value").length <= 0) {
		handleError("Donation amount is required!");
		isValid = 0;
	}

	if($j("#cardnum").attr("value").length <= 0) {
		handleError("Credit card number is required!");
		isValid = 0;
	}

	if($j("#expmonth").attr("value").length <= 0) {
		handleError("Credit card expiration month is required!");
		isValid = 0;
	}

	if($j("#expyear").attr("value").length <= 0) {
		handleError("Credit card expiration year is required!");
		isValid = 0;
	}

	if (isValid != 1) showError();
			
	return isValid;	
}
 		
 
   $j(function() {
   	 hideError();
   	   
     $j(".saveButton").click(function() {  
		alert("I'm here!");
		
		clearError();
		hideError();
		
		if (validateForm() == 1){
		
		var pi = {
			paymentType: "CC",
			ccNumber: $j("#cardnum").attr("value"),
			ccExpMonth: $j("#expmonth").attr("value"),
			ccExpYear: $j("#expyear").attr("value")
		};
		
		var d = { 
			firstName: $j("#firstName").attr("value"),
			lastName: $j("#lastName").attr("value"),
			emailAddress: $j("#email").attr("value"),
			phoneNumber: $j("#phone").attr("value"),
			amount: $j("#amount").attr("value"),
			paymentInfo: pi
		};
		
		donateNow.donate(d,handleReturn);
}
      });  
    });  
</script>
<div id="constituent_contactInfo"
	class="columns constituent_contactInfo">

<div class="column singleColumn">
<h4 class="formSectionHeader">Contact Details</h4>
<div id="globalErrors" class="globalFormErrors">
<h5>Please correct the following errors.</h5>
<ul id="errors">
</ul>
</div>
<div id="approval">
<ul id="approved"></ul>
</div>

<ul class="formFields width350">
	<li class="side"><label for="firstName" id="firstname_label">First
	Name</label> <input type="text" name="firstName" id="firstName" size="15"
		value="" class="text ea-individual"></input></li>

	<li class="side"><label for="lastName" id="lastname_label">Last
	Name</label> <input type="text" name="lastName" id="lastName" size="15"
		value="" class="text ea-individual"></input></li>

	<li class="side"><label for="email" id="email_label">Email
	Address</label> <input type="text" name="email" id="email" size="15" value=""
		class="text ea-individual"></input></li>

	<li class="side"><label for="phone" id="phone_label">Phone</label>
	<input type="text" name="phone" id="phone" size="15" value=""
		class="text ea-individual" /></li>
</ul>




<h4 class="formSectionHeader">Gift Information</h4>

<ul class="formFields widht350">
	<li class="side"><label for="amount" id="amount_label">Donation
	Amount</label> <input type="text" name="amount" id="amount" size="30" value=""
		class="text ea-individual" /></li>
</ul>

<h4 class="formSectionHeader">Payment Information</h4>
<ul class="formFields width350">
	<li class="side"><label for="cardnum" id="cardnum_label">Card
	Number</label> <input type="text" name="cardnum" id="cardnum" size="15"
		value="" class="text ea-individual"></input></li>

	<li class="side"><label for="expmonth" id="expmonth_label">Expiration
	Month</label> <input type="text" name="expmonth" id="expmonth" size="2"
		value="" class="text ea-individaul"></input> <label for="expyear"
		id="expyear_label">Expiration Year</label> <input type="text"
		name="expyear" id="expyear" size="4" value=""
		class="text ea-individual"></input></li>
</ul>
<li class="side">
<ul>
	<input type="submit" name="donatebtn" id="donatebtn" class="saveButton"
		value="Donate">
</div>
<div class="clearColumns" />
</ul>
</li>
</div>


<!--
<form name="donate" action="">
<table>
	<tr>
	</tr>
	<tr>

	</tr>
	<tr>
	</tr>
	<tr>

	</tr>

	<tr>
		<td><label for="addrLine1" id="addrLine1_label">Address 1</label></td>
		<td><input type="text" name="addrLine1" id="addrLine1" size="30"
			value="" class="text-input"></input></td>
	</tr>

	<tr>
		<td><label for="addrLine2" id="addrLine2_label">Address 2</label></td>
		<td><input type="text" name="addrLine2" id="addrLine2" size="30"
			value="" class="text-input"></input></td>
	</tr>

	<tr>
		<td><label for="addrLine3" id="addrLine3_label">Address 3</label></td>
		<td><input type="text" name="addrLine3" id="addrLine3" size="30"
			value="" class="text-input"></input></td>
	</tr>

	<tr>
		<td><label for="city" id="city_label">City</label></td>
		<td><input type="text" name="city" id="city" size="30" value=""
			class="text-input"></input></td>
	</tr>
	<tr>
		<td><label for="state" id="state_label">State</label></td>
		<td><input type="text" name="state" id="state" size="30" value=""
			class="text-input"></input></td>
	</tr>
	<tr>
		<td><label for="zip" id="zip_label">Postal Code</label></td>
		<td><input type="text" name="zip" id="zip" size="30" value=""
			class="text-input"></input></td>
	</tr>

	<tr>
	</tr>

	<tr>
	</tr>

	<tr>
	</tr>

	<tr>
		<td><input type="submit" name="donatebtn" id="donatebtn"
			class="button" value="Donate"></input></td>
	</tr>
</table>
</form>
-->
</body>
</html>
