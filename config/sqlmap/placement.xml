<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Placement">
	<resultMap id="result" class="com.orangeleap.donatenow.domain.Placement">
		<result property="id" column="id" jdbcType="BIGINT"/>
		<result property="widgetid" column="widgetid" jdbcType="BIGINT"/>
		<result property="placementURL" column="placementURL" jdbcType="VARCHAR"/>
		<result property="errorCount" column="errorCount" jdbcType="BIGINT"/>
		<result property="giftCount" column="giftCount" jdbcType="BIGINT"/>
		<result property="viewCount" column="viewCount" jdbcType="BIGINT"/>
		<result property="site" column="site" jdbcType="VARCHAR"/>
	</resultMap>

	<select id="listPlacementsByWidgetId" resultMap="result">
		select id,widgetid,placementURL,errorCount,giftCount,viewCount from PLACEMENTS where widgetid=#widgetid# and site=#sitename#
	</select>	
	<select id="findPlacementByURL" resultMap="result">
		select id,widgetid,placementURL,errorCount,giftCount,viewCount from PLACEMENTS where placementURL=#url# and site=#sitename#
	</select>
	
	<insert id="savePlacement" parameterClass="com.orangeleap.donatenow.domain.Placement">
		insert into PLACEMENTS (widgetid,placementURL,errorCount,giftCount,viewCount) values (#widgetid#,#placementURL#,#errorCount#,#giftCount#,#viewCount#)
	</insert>
	
	<update id="updatePlacement" parameterClass="com.orangeleap.donatenow.domain.Placement">
		update PLACEMENTS set widgetid=#widgetid#,placementURL=#placementURL#,errorCount=#errorCount#,giftCount=#giftCount#,viewCount=#viewCount# where id=#id#
	</update>
	
</sqlMap>