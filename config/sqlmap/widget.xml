<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="DonateWidget">
	<resultMap id="result" class="com.orangeleap.donatenow.domain.DonateWidget">
		<result property="id" column="id" jdbcType="BIGINT"/>
		<result property="guid" column="guid" jdbcType="VARCHAR"/>
		<result property="userName" column="userName" jdbcType="VARCHAR"/>
		<result property="passWord" column="passWord" jdbcType="VARCHAR"/>
		<result property="projectCode" column="projectCode" jdbcType="VARCHAR"/>
		<result property="motivationCode" column="motivationCode" jdbcType="VARCHAR"/>
		<result property="errorCount" column="errorCount" jdbcType="BIGINT"/>
		<result property="giftCount" column="giftCount" jdbcType="BIGINT"/>
		<result property="createDate" column="createDate" jdbcType="DATETIME"/>
		<result property="widgetHTML" column="widgetHTML" jdbcType="VARCHAR"/>
		<result property="viewCount" column="viewCount" jdbcType="BIGINT"/>
	</resultMap>
	
	<select id="findWidgetById" resultMap="result">
		select id,guid,userName,passWord,projectCode,motivationCode,errorCount,giftCount,createDate,widgetHTML,viewCount from WIDGETS where id=#value#
	</select>
	
	<select id="findWidgetByGuid" resultMap="result">
		select id,guid,userName,passWord,projectCode,motivationCode,errorCount,giftCount,createDate,widgetHTML,viewCount from WIDGETS where guid=#value#
	</select>
	
	<select id="listWidgets" resultMap="result" parameterClass="map">
		select id,guid,userName,passWord,projectCode,motivationCode,errorCount,giftCount,createDate,widgetHTML,viewCount from WIDGETS where userName=#userName# and passWord=#passWord#
	</select>
	
	<update id="updateWidget" parameterClass="com.orangeleap.donatenow.domain.DonateWidget">
		update WIDGETS set guid=#guid#,userName=#userName#, passWord=#passWord#,motivationCode=#motivationCode#,errorCount=#errorCount#,giftCount=#giftCount#,viewCount=#viewCount# where id=#id# 
	</update>
	<insert id="saveWidget" parameterClass="com.orangeleap.donatenow.domain.DonateWidget">
		insert into WIDGETS (guid,userName,passWord,projectCode,motivationCode,errorCount,giftCount,createDate,widgetHTML,viewCount) values
		(#guid#,#userName#,#passWord#,#projectCode#,#motivationCode#,#errorCount#,#giftCount#,#createDate#,#widgetHTML#,#viewCount#)
		<selectKey keyProperty="id" resultClass="long">
			SELECT LAST_INSERT_ID() AS value
		</selectKey>
	</insert>
</sqlMap>