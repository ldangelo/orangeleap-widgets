<!DOCTYPE html PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>
<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
<title>Donor Portal</title>
 <link rel='stylesheet' href='/donatenow/css/tangerine.css.min.css' /> 

<script type='text/javascript' src='/donatenow/dwr/interface/OrangeLeapWidget.js'></script>
<script type='text/javascript' src='/donatenow/dwr/engine.js'></script>
<script type='text/javascript' src='/donatenow/dwr/util.js'></script>
<script type='text/javascript' src='/donatenow/js/jquery/jquery-1.3.2.js'></script>
<script type="text/javascript" src="js/extjs/ext-base.js"></script>
<!--<script type="text/javascript" src="js/extjs/ext-jquery-adapter.js"></script>-->
<script type="text/javascript" src="js/extjs/ext-all-debug.js"></script>
<script type='text/javascript' src='/donatenow/js/customentitylist.js'></script>
</head>
<body class='ext-gecko ext-gecko3 ext-mac'>
<div id='customentitywidget' class='columns'>
<ul id='customentitywidget' class='formFields width385'></ul>
</div>
<script type='text/javascript'>
Ext.onReady(function() {

var reader = new Ext.data.JsonReader();
var proxy=new Ext.data.HttpProxy({url:'/donatenow/customEntityList.json?guid=TEST3',
listeners: {
'exception':function(proxy, type, action ,options, response, args) {
window.alert("exception: " + args);
}
}});
	var mydatastore = new Ext.data.Store( {
//root:'metaData',
metaData:true,
//	    url:'/donatenow/customEntityList.json?guid=TEST3',
reader:reader,
proxy:proxy,
listeners: {
        'metachange': function (store, meta) {
               var fields = meta.fields;
                    // has the right definition

                    var columns = [];
for (var f=0;f < fields.length; f++) {
//                    col = new Ext.grid.Column({
//                        align: 'left',
//                        header: fields[f].header,
//                        width: 100,
//                        sortable: true,
//		 grid:grid,
//                        dataIndex: fields[f].name
//                    });

                    columns.push({header: fields[f].header, dataIndex: fields[f].name,sortable:true});

}
		 
                    grid.reconfigure(store,new Ext.grid.ColumnModel(columns));
},
'load': function(store, records, options) {
	grid.render("customentitywidget");
}}});



	var grid = new Ext.grid.GridPanel({
	    store: mydatastore,
	    columns:     [
//{"id": "firstName",width: 100,header:'First Name',dataIndex:'firstName'},
//	 {"id": "lastName",width: 100,header:'Last Name',dataIndex:'lastName'},
//	 {"id": "creditCardType",header: 'CC Type',dataIndex: 'creditCardType'},
//	 {"id": "creditCardNumber",header: 'CC Number',dataIndex: 'creditCardNumber'},
//	 {"id": "creditCardExpirationMonth",header: 'Month',dataIndex: 'creditCardExpirationMonth'},
//	 {"id": "creditCardExpirationYear",header: 'Year',dataIndex: 'creditCardExpirationYear'},
//	 {"id": "amount",header:'Amount',dataIndex:'amount'}
],

	    viewConfig: {
		forceFit: false,
		emptyText: 'Enter Search Terms'
	    },
	    stripeRows: true,
	    title: "Testing" ,
	    height: 350,
	    width:655
	});
        mydatastore.load();

//customentitylist.generateWidget("customentitywidget","TEST3",false,"/donatenow/testlogin.html");
});
</script>    
</body>
</html>
